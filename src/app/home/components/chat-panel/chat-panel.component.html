<!-- Chat FAB -->
<button class="chat-fab" (click)="toggle()" [class.active]="isOpen">
  <span *ngIf="!isOpen">ğŸ¤–</span>
  <span *ngIf="isOpen">âœ•</span>
</button>

<!-- Chat Panel -->
<div class="chat-panel" *ngIf="isOpen">
  <div class="chat-header">
    <h4>Jarvis AI</h4>
    <div class="chat-actions">
      <button class="analyze-btn" (click)="analyzeToday()" [disabled]="isLoading">ğŸ“Š Analyze</button>
      <button class="clear-btn" (click)="clearChat()">ğŸ—‘ï¸</button>
    </div>
  </div>
  
  <div class="chat-messages">
    <div class="chat-welcome" *ngIf="messages.length === 0">
      <p>ğŸ‘‹ Ask me about your health data</p>
    </div>
    
    <div class="chat-message" *ngFor="let msg of messages" 
         [class.user]="msg.role === 'user'"
         [class.assistant]="msg.role === 'assistant'">
      <div class="message-content">{{ msg.content }}</div>
    </div>
    
    <div class="chat-loading" *ngIf="isLoading">Thinking...</div>
  </div>
  
  <div class="chat-input-area">
    <input type="text" [(ngModel)]="inputText" placeholder="Ask something..." (keyup.enter)="sendMessage()" [disabled]="isLoading">
    <button (click)="sendMessage()" [disabled]="isLoading || !inputText.trim()">â¤</button>
  </div>
</div>
